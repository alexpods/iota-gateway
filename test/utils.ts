import { Transaction, Hash, Factory, Serializer } from 'iota-tangle'
import { Transport, ReceiveCallback } from '../src/transport'

const serializer = new Serializer()
const factory = new Factory({ serializer })

export class TransportStub extends Transport {
  async run(cb: ReceiveCallback): Promise<void> {}
  async stop(): Promise<void> {}
}

export function generateTransaction(): Transaction {
  const buffer = Buffer.alloc(1604)

  buffer.write(String(Math.random()), 0, 18)

  return factory.createTransactionFromBytes(buffer)
}

export function generateHash(): Hash {
  const buffer = Buffer.alloc(49)

  buffer.write(String(Math.random()), 0, 18)

  return factory.createHashFromBytes(buffer)
}

// export function generateTransaction(params: any = {}) {
//   if (params.message && params.message.length < 2187) {
//     params.message = params.message.padEnd(2187, '9')
//   }

//   return Object.assign({}, {
//     hash:    'IBQHNXPILYG9K9PFBZYZDTVHHQNEBENUKRAVMO9DJEGQ9VDIUAWU9FORBFZDSDBWOLWNFGCYVLEG99999',
//     address: 'CQNSCEPCDQNMWFYIVRZDSYKPFQLKPOSIXFZCKGTGDROGMDXMYHOR9JRUDZLXHOALXEAZWWLEXRJBLCWVC',
//     branch:  'EMEKOFNNGJDAZJWPWIZHIYQQCFWLBNNVCAEEJ9RDML9SHXUTDOKKBMRGHZWJIGYHUEKSZMMTAIWS99999',
//     trunk:   'YFEPOAXZKPAXQHMPIFGTNMTVFY9OHIBOIUVQVZYVNMEERVQCPU9UPJOGVM9D9X9YFLLFCSFVOXLK99999',
//     bundle:  'QLXDGLLXQIHPXYEKBPFHOSDFIXQRJCZVYVC9TOKBLRWYH9TWXCNGKI9N9RDBHLUBZGGFVWGIZU9Y9VDQW',
//     message: (
//       'MINEIOTADOTCOM9MANUAL9PAYOUT999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '9999999999999999999999999999999999999999999999999999999999999999999999999999999' +
//       '999999999999999999999999999999999999999999999999999999'
//     )
//   }, params)
// }